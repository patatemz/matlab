% I1*(R1+R2+R3) - I2*(R2) - I3*(0) = U1
% -I1*(R2) + I2*(R2+R4+R5) + I3*(R5) = -U2
% -I1*(0) - I2*(R5) + I3*(R5+R7+R8) = -U3
% G * U = I

t = 0:0.01:5;
U1 = sin(2*pi*t);
U2 = lab_darbs_3(t)
U3 = 2*ones(size(t));

U = [U1; -U2; -U3];

r = [1 5 4 7 4 8 2 9];

R = [sum(r(1:3)), -r(2), -0;
    -r(2), sum(r([2 4 5 6])), -r(5)
    -0, -r(5), r(5)+r(7)+r(8)];

% (R1+R2+R3)    (R2)            (0)
% (R2)          (R2+R4+R5)      (R5)
% (0)           (R5)            (R5+R7+R8)

I = R\U;
UR2 = r(2) * (I(1, :)-I(2, :));
PR2 = r(2) * (I(1, :) - I(2, :)).^2

Ekr = r(4)*(I(2))+r(5)*(I(2)-I(3))+...
      r(6)*I(2)+r(2)*(I(2)-I(1)) + U2


